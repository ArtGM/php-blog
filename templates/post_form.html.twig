{% extends 'dashboard.html.twig' %}
{% block post_form %}
    <form id="{% if post.id is empty %}create{% else %}update{% endif %}-post-form"
          action="{% if post.id is empty %}/newpost{% else %}/updatepost{% endif %}" method="post">
        <div class="form-group">
            <label for="post-title">Titre</label>
            <input class="form-control" type="text" id="post-title" name="title" value="{{ post.title }}">

            {% if errors.title %}
                <div class="alert alert-danger">
                    {{ errors.title }}
                </div>
            {% endif %}
        </div>
        <div class="form-group">
            <label for="content">Message</label>
            <textarea class="form-control" name="content" id="content" cols="30" rows="10">{{ post.content }}</textarea>

            {% if errors.content %}
                <div class="alert alert-danger">
                    {{ errors.content }}
                </div>
            {% endif %}
        </div>
        <fieldset class="form-group">
            <div class="form-check">
                <input class="form-check-input" type="radio" id="online" name="status" value="1"
                       {% if post.status == 1 %}checked{% endif %}>
                <label class="form-check-label" for="online">Publier</label>
            </div>

            <div class="form-check">
                <input class="form-check-input" type="radio" id="draft" name="status" value="0"
                       {% if post.status == 0 %}checked{% endif %}>
                <label class="form-check-label" for="draft">Enregistrer comme Brouillon</label>
            </div>
        </fieldset>


        <input class="btn btn-success" type="submit" id="submit-post" value="Enregistrer">
        {% if post.id is empty %}
            <input id="user-id" type="hidden" name="user_id" value="3"> <!-- TODO: set the logged-in user id  -->
            <input id="user-role" type="hidden" name="user_role" value="1">
        {% else %}
            <input id="post-id" type="hidden" name="id" value="{{ post.id }}">
        {% endif %}
    </form>
{% endblock %}
